const buttonOpenPopup=document.querySelector(".button-open-popup"),closePopup=document.querySelector(".close-button-popup"),popup=document.querySelector(".popup"),form=popup.querySelector(".popup-form"),inputName=popup.querySelector(".input-name"),inputEmail=popup.querySelector(".input-email"),textLetter=popup.querySelector("[name=text-letter]");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("yourName")}catch(p){isStorageSupport=!1}buttonOpenPopup.addEventListener("click",p=>{p.preventDefault(),popup.classList.add("popup-show"),storage?(inputName.value=storage,inputEmail.focus()):inputName.focus()}),closePopup.addEventListener("click",p=>{p.preventDefault(),popup.classList.remove("popup-show"),popup.classList.remove("popup-error")}),form.addEventListener("submit",p=>{inputName.value&&inputEmail.value&&textLetter.value?isStorageSupport&&localStorage.setItem("yourName",inputName.value):(p.preventDefault(),popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error"))}),window.addEventListener("keydown",p=>{27===p.keyCode&&popup.classList.contains("popup-show")&&(p.preventDefault(),popup.classList.remove("popup-show"),popup.classList.remove("popup-error"))});